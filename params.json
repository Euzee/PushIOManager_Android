{"google":"UA-16817212-1","note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Push IO Manager","tagline":"Android Integration Guide","body":"![Push IO®](http://push.io/wp-content/uploads/2012/05/pushio_logo.png)\r\n\r\nCopyright © 2009 - 2012 Push IO LLC. All Rights Reserved.  \r\nPush IO® is a registered trademark in the United States. All other trademarks are the property of their respective owners.\r\n\r\n#### Software License Information\r\nThe use of any and all Push IO software regardless of release state is governed by the terms of a Software License Agreement and Terms of Use that are not included here but required by reference. \r\n\r\n#### Privacy Information\r\nThe use of Push IO services is subject to various privacy policies and restrictions on the use of end user information. For complete information please refer to your Master Agreement, our website privacy policies, and/or other related documents.\r\n\r\n#### Billing\r\nFor information on your account and billing, please contact sales@push.io\r\n\r\n#### Contact Info\r\nPush IO  \r\n1035 Pearl Street, Suite 400  \r\nBoulder, CO 80302 USA  \r\n303-335-0903  \r\n[support@push.io](mailto:support@push.io)  \r\n[www.push.io](http://www.push.io)   \r\n\r\n## Preface\r\nPush IO is a leading provider of real-time push notification alerts and mobile data delivery.This document provides the necessary information to leverage Push IO for your mobile application. This document corresponds to the latest version of PushIOManager for Android.\r\n\r\n## Definitions\r\n\r\n#### UUID  \r\nA unique identifier corresponding to a specific device that is used to register with the Push IO service.\r\n\r\n#### Category   \r\nA category defines a specific content type that your app has which users might \tbe interested in. For example, if your app is a sports app, a category may be a specific team. \r\n\r\n#### Audience   \r\nAn audience defines a group of users based on one or more categories or platforms. For example, you might make an audience out of all of the users who have registered to a category for a team in the Western Conference who are using your app on Android.\r\n\r\n#### Test Device  \r\nA device specially registered with Push IO to help you troubleshoot, test, and preview push notifications.\r\n\r\n## App Integration\r\n\r\n#### Overview\r\nPush IO provides a lightweight PushIOManager library for each supported platform. \r\n\r\nThe library provides simple methods for registering so Push IO can send push notifications to a device via the platform gateway. The library also provides interfaces for segmenting your users into groups called categories. This allows you to send targeted push notifications only to those users who have expressed an interest in *bird watching*, and then perhaps only users who are interested in *robins*.\r\n\r\nPush IO is the only push notification provider which provides data that allows you to understand how push notification engagement leads your users to high-value actions like in-app purchases, premium content viewing, and more. The PushIOManager library provides a simple mechanism to capture this push conversion information, which is available to you via the [Push IO Manager](https://manage.push.io) dashboard.\r\n\r\n#### Integration Prerequisites\r\nBefore continuing, be sure you have what you need to integrate Push IO into your app.\r\n\r\n1. Sign Up for a Push IO account at [https://manage.push.io](https://manage.push.io)\r\n2. Download our Push IO Mobile Dashboard app to easily send your first push!\r\n3. Obtain a service ID and API key for Google's [GCM](http://developer.android.com/guide/google/gcm/gs.html) service\r\n4. Setup your app and add an Android platform at [https://manage.push.io](https://manage.push.io)\r\n5. Downloaded PushIOManager for Android and pushio_config.json from [Set Up > Android](https://manage.push.io)\r\n\r\n![Platform download](http://pushiocdn.s3.amazonaws.com/docs_assets/platformdetail_android.png)\r\n\r\nAll set? Now you’re ready to integrate Push IO into your app!\r\n\r\n## PushIOManager for Android\r\n\r\nIn order to add the PushIOManager JAR to your Android application, follow these simple steps:\r\n\r\n* Locate the two files you downloaded from Set Up > Android from the Push IO Manager dashboard.\r\n\r\n![Downloads](http://pushiocdn.s3.amazonaws.com/docs_assets/files_android.png)\r\n\r\n* Add the PushIOManager.jar to your project’s libs folder.\r\n\r\n* Drag pushio_config.json file to your project.\r\n\r\n> The pushio_config.json must be in your application bundle in order for the PushIOManager read your API key and properly connect to the backend service.\r\n\r\n* Now you need to set up your Android Manifest. The following user-permissions are required to use Google Cloud Messaging (replace com.example with your application namespace). \r\n\r\n```java\r\n    <uses-permission  android:name=\"com.example.permission.C2D_MESSAGE\" />\r\n    <uses-permission android:name=\"com.google.android.c2dm.permission.RECEIVE\" />\r\n    <uses-permission android:name=\"android.permission.WAKE_LOCK\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\r\n\r\n     <permission android:name=\"com.example.permission.C2D_MESSAGE\" android:protectionLevel=\"signature\" />\r\n```\r\n\r\n* In the Android Manifest under the “application” tag you need to set up the PushIOBroadcastReceiver. (Once again replace com.example for your application namespace.)\r\n\r\n> Even though Google has moved from C2DM to CCM the permissions still use the \tc2dm name for backward compatibility with older devices.\r\n\r\n```java\r\n<receiver android:name=\"com.pushio.manager.PushIOBroadcastReceiver\" android:permission=\"com.google.android.c2dm.permission.SEND\" >\r\n            <intent-filter>\r\n                <action android:name=\"com.google.android.c2dm.intent.RECEIVE\" />\r\n                <action android:name=\"com.google.android.c2dm.intent.REGISTRATION\" />\r\n                <category android:name=\"com.example\" />\r\n            </intent-filter>\r\n        </receiver>\r\n\r\n        <activity android:name=\"com.pushio.manager.PushIOActivityLauncher\"/>\r\n        <service android:name=\"com.pushio.manager.PushIOGCMIntentService\" />\r\n        <service android:name=\"com.pushio.manager.PushIOEngagementService\"/>\r\n```\r\n\r\n* Set-up the ensureRegistration call when the application is first starting. This will ensure that registration is maintained between upgrades of the application. \r\n\r\n```java\r\n     PushIOManager pushIOManager = \r\n        new PushIOManager(getApplicationContext(), this, null);\r\n      pushIOManager.ensureRegistration();\r\n```\r\n\r\n* Register with Push IO  \r\n\r\nYou can register a device with Push IO one of two ways. First, if your application gives users a way to specify a preference or favorite, you may want to register for that category you can you push to them relevant content. Note that the PushIOManager has two callbacks that can be optionally implemented that allow you to deal with success and errors. Additionally success and error is logged under the “pushio” tag. \r\n\r\nThis kind of registration would be tied to a notification UI, allowing the user to select categories.\r\n\r\n```java\r\n        // Register for US and World Headlines\r\n\tPushIOManager pushIOManager = \r\n        new PushIOManager(getApplicationContext(), this, null);\r\n\tList<String> categories = new ArrayList<String>();\r\n\tcategories.add(\"US\");\r\n\tcategories.add(\"World\");\r\n\tpushIOManager.registerCategories( categories, false );\r\n\r\n     \r\n        // Unregister for US Headlines\r\n        PushIOManager pushIOManager = \r\n        new PushIOManager(getApplicationContext(), this, null);\r\n\tList<String> categories = new ArrayList<String>();\r\n\tcategories.add(\"US\");\r\n\tpushIOManager.unregisterCategories( categories, false );\r\n```\r\nIf you just want to be able to broadcast to all your users at once, you can simple call ensureRegistration (on application startup). To unregister a device simply call unregisterDevice. \r\n```java\r\n        // Unregister device\r\n\tPushIOManager pushIOManager = \r\n        new PushIOManager(getApplicationContext(), this, null);\r\n\tpushIOManager.unregisterDevice();\r\n```\r\n\r\n* Handle Push  \r\n\r\nIn Android there are two ways to handle push notifications, you can use the PushIOManager built-in notifications, or you can implement them on your own. \r\n\r\nFor built-in notifications simply leave the last parameter null when creating the PushIOManager. When creating a new notification the PushIOManager will grab icon by name from you application drawables and the sound from your application resources. To handle notification presses you need to register a new intent filter for the action “com.example.NOTIFICATIONPRESSED”, with the “android.intent.category.DEFAULT” category specified in your Android Manifest. This filter will call your activity on a notification press. \r\n```java\r\n  <activity android:name=\"NewsActivity\">\r\n            <intent-filter>\r\n                <action  \t\tandroid:name=\"com.example.NOTIFICATIONPRESSED\"/>\r\n                <category \tandroid:name=\"android.intent.category.DEFAULT\"/>\r\n            </intent-filter>\r\n  </activity>\r\n```\r\nTo handle notification yourself, you need to create your won Broadcast Receiver and register it for the PUSHIOPUSH action. \r\n```java\r\n        <receiver android:name=\"com.example.NotificationBroadcastReceiver\">\r\n            <intent-filter>\r\n                <action  android:name=\"com.example.PUSHIOPUSH\"/>\r\n                <category android:name=\"android.intent.category.DEFAULT\" />\r\n            </intent-filter>\r\n        </receiver>\r\n```\r\nThis custom receiver allows you to handle the push in any way you see fit, it is however important that you respond to broadcast to let the Push IO Manager know how you are handling the operation (so we can properly track engagements). You do this by setting an integer on the broadcast receiver result as follows.\r\n```java\r\n        Bundle extras = getResultExtras(true);\r\n        extras.putInt(PushIOManager.PUSH_STATUS,  PushIOManager.PUSH_HANDLED_NOTIFICATION);\r\n        setResultExtras(extras);\r\n```\r\n\r\nCongratulations, that's all there is to it! You should now be ready to test your Android integration.\r\n\r\nIf you need further assistance, please visit our [support site](http://pushio.zendesk.com)."}